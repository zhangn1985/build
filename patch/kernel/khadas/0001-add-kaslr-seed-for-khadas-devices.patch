From 1ee8ef83e5dbb85e6d529eaa5aec3cfda51b18ff Mon Sep 17 00:00:00 2001
From: Zhang Ning <832666+zhangn1985@users.noreply.github.com>
Date: Mon, 13 Apr 2020 10:36:20 +0800
Subject: [PATCH] add kaslr-seed for khadas devices

Signed-off-by: Zhang Ning <832666+zhangn1985@users.noreply.github.com>
---
 arch/arm64/boot/dts/amlogic/meson-gxl-s905x-khadas-vim.dts | 5 +++++
 arch/arm64/boot/dts/amlogic/meson-gxm-khadas-vim2.dts      | 1 +
 arch/arm64/boot/dts/amlogic/meson-khadas-vim3.dtsi         | 1 +
 arch/arm64/boot/dts/rockchip/rk3399-khadas-edge.dtsi       | 1 +
 4 files changed, 8 insertions(+)

diff --git a/arch/arm64/boot/dts/amlogic/meson-gxl-s905x-khadas-vim.dts b/arch/arm64/boot/dts/amlogic/meson-gxl-s905x-khadas-vim.dts
index 440bc23c7342..eb340851f182 100644
--- a/arch/arm64/boot/dts/amlogic/meson-gxl-s905x-khadas-vim.dts
+++ b/arch/arm64/boot/dts/amlogic/meson-gxl-s905x-khadas-vim.dts
@@ -13,6 +13,11 @@ / {
 	compatible = "khadas,vim", "amlogic,s905x", "amlogic,meson-gxl";
 	model = "Khadas VIM";
 
+	chosen {
+		stdout-path = "serial0:115200n8";
+		kaslr-seed  = <0x10000000 0x20000000>;
+	};
+
 	adc-keys {
 		compatible = "adc-keys";
 		io-channels = <&saradc 0>;
diff --git a/arch/arm64/boot/dts/amlogic/meson-gxm-khadas-vim2.dts b/arch/arm64/boot/dts/amlogic/meson-gxm-khadas-vim2.dts
index 27eeab71ec77..63e6218ca201 100644
--- a/arch/arm64/boot/dts/amlogic/meson-gxm-khadas-vim2.dts
+++ b/arch/arm64/boot/dts/amlogic/meson-gxm-khadas-vim2.dts
@@ -22,6 +22,7 @@ aliases {
 
 	chosen {
 		stdout-path = "serial0:115200n8";
+		kaslr-seed  = <0x10000000 0x20000000>;
 	};
 
 	memory@0 {
diff --git a/arch/arm64/boot/dts/amlogic/meson-khadas-vim3.dtsi b/arch/arm64/boot/dts/amlogic/meson-khadas-vim3.dtsi
index 094ecf2222bb..3d8d6d76ffca 100644
--- a/arch/arm64/boot/dts/amlogic/meson-khadas-vim3.dtsi
+++ b/arch/arm64/boot/dts/amlogic/meson-khadas-vim3.dtsi
@@ -16,6 +16,7 @@ aliases {
 
 	chosen {
 		stdout-path = "serial0:115200n8";
+		kaslr-seed  = <0x10000000 0x20000000>;
 	};
 
 	memory@0 {
diff --git a/arch/arm64/boot/dts/rockchip/rk3399-khadas-edge.dtsi b/arch/arm64/boot/dts/rockchip/rk3399-khadas-edge.dtsi
index e87a04477440..96b1eb2104d5 100644
--- a/arch/arm64/boot/dts/rockchip/rk3399-khadas-edge.dtsi
+++ b/arch/arm64/boot/dts/rockchip/rk3399-khadas-edge.dtsi
@@ -13,6 +13,7 @@
 / {
 	chosen {
 		stdout-path = "serial2:1500000n8";
+		kaslr-seed  = <0x10000000 0x20000000>;
 	};
 
 	clkin_gmac: external-gmac-clock {
-- 
2.25.0

